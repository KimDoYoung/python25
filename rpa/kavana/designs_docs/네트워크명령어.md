# ë„¤íŠ¸ì›Œí¬ ëª…ë ¹ì–´

## ê°œìš”

1. ëª…ë ¹ì–´ ì„œë²„ëª…ë ¹ì–´, ì˜µì…˜(í‚¤=ê°’),...
    - FTP upload host="127.0.0.1", ...
2. WITH hashmap ì‚¬ìš©
    - ì˜µì…˜ë“¤ì„ hasmapì— ë„£ì–´ì„œ


```kvs
    SET ftp_info = {
        "host" : "127.0.0.1",
        "port" : 21,
        "remote_dir" : "/home/kdy/data",
        ...
    }
    FTP upload with=ftp_info file=r"c:\tmp\a.txt"
```

## ğŸ“Œ ëª…ë ¹ì–´: `FTP`

| í•­ëª©         | ì„¤ëª…                                   |
|--------------|----------------------------------------|
| **ëª…ë ¹ì–´**   | `FTP`                                  |
| **ì„¤ëª…**     | FTP ì„œë²„ì— ì ‘ì†í•˜ì—¬ íŒŒì¼ ì—…/ë‹¤ìš´ë¡œë“œ ë“± ìˆ˜í–‰ |
| **í˜•ì‹ ì˜ˆì‹œ**| `FTP upload host="..." file="..."` ë˜ëŠ” `FTP upload WITH=config file="..."` |

---

### ğŸ§± Subcommand ì •ë¦¬

| Subcommand | ì„¤ëª…                       |
|------------|----------------------------|
| `upload`   | ë¡œì»¬ íŒŒì¼ì„ ì„œë²„ë¡œ ì—…ë¡œë“œ |
| `download` | ì„œë²„ íŒŒì¼ì„ ë¡œì»¬ë¡œ ë‹¤ìš´ë¡œë“œ |
| `list`     | ì›ê²© ë””ë ‰í† ë¦¬ ëª©ë¡ ì¡°íšŒ    |
| `delete`   | ì›ê²© íŒŒì¼ ì‚­ì œ             |
| `mkdir`    | ì›ê²© ë””ë ‰í† ë¦¬ ìƒì„±         |24
| `rmdir`    | ì›ê²© ë””ë ‰í† ë¦¬ ì‚­ì œ         |
| `batch`    | ì›ê²© ë””ë ‰í† ë¦¬ ì‚­ì œ         |

---

### âš™ï¸ ì˜µì…˜ ì •ë¦¬

| ì˜µì…˜ ì´ë¦„      | ì„¤ëª…                                | í•„ìˆ˜ ì—¬ë¶€     | ì˜ˆì‹œ                        |
|----------------|-------------------------------------|----------------|-----------------------------|
| `host`         | FTP ì„œë²„ IP ë˜ëŠ” ë„ë©”ì¸             | âœ…             | `"127.0.0.1"`               |
| `port`         | FTP í¬íŠ¸ (ê¸°ë³¸ê°’: 21)               | âŒ             | `21`                        |
| `user`         | ë¡œê·¸ì¸ ê³„ì •                         | âœ…             | `"myid"`                    |
| `password`     | ë¡œê·¸ì¸ ë¹„ë°€ë²ˆí˜¸                     | âœ…             | `"mypassword"`              |
| `remote_dir`   | ì„œë²„ ìƒì˜ ê²½ë¡œ                      | âŒ             | `"/home/files"`             |
| `file`         | ì „ì†¡í•  ë¡œì»¬ íŒŒì¼ ë˜ëŠ” ì €ì¥ ê²½ë¡œ     | `upload/download`ì—ì„œ âœ… | `"c:/tmp/data.csv"`  |
| `passive_mode` | Passive ëª¨ë“œ ì‚¬ìš© ì—¬ë¶€              | âŒ             | `True`, `False`             |
| `timeout`      | ì—°ê²° íƒ€ì„ì•„ì›ƒ(ì´ˆ ë‹¨ìœ„)              | âŒ             | `10`                        |
| `overwrite`    | ë‹¤ìš´ë¡œë“œ ì‹œ íŒŒì¼ ë®ì–´ì“°ê¸° ì—¬ë¶€      | âŒ             | `True`, `False`             |
| `with`         | ì„¤ì • ì •ë³´ë¥¼ ë‹´ì€ map ê°ì²´ ì°¸ì¡°      | âŒ             | `WITH=config`               |
| `to_var`       | ê²°ê³¼ë¥¼ ë³€ìˆ˜ì— ì €ì¥                 | âŒ             | `to_var=ftp_result`               |

## ğŸ“Œ ëª…ë ¹ì–´: `SFTP`

| í•­ëª©         | ì„¤ëª…                                         |
|--------------|----------------------------------------------|
| **ëª…ë ¹ì–´**   | `SFTP`                                       |
| **ì„¤ëª…**     | SFTP(SSH File Transfer Protocol)ì„ ì´ìš©í•œ ë³´ì•ˆ íŒŒì¼ ì „ì†¡ |
| **í˜•ì‹ ì˜ˆì‹œ**| `SFTP upload host="..." file="..."` ë˜ëŠ” `SFTP upload WITH=config file="..."` |

---

### ğŸ§± Subcommand ì •ë¦¬

| Subcommand | ì„¤ëª…                       |
|------------|----------------------------|
| `upload`   | ë¡œì»¬ íŒŒì¼ì„ ì„œë²„ë¡œ ì—…ë¡œë“œ |
| `download` | ì„œë²„ íŒŒì¼ì„ ë¡œì»¬ë¡œ ë‹¤ìš´ë¡œë“œ |
| `list`     | ì›ê²© ë””ë ‰í† ë¦¬ ëª©ë¡ ì¡°íšŒ    |
| `delete`   | ì›ê²© íŒŒì¼ ì‚­ì œ             |
| `mkdir`    | ì›ê²© ë””ë ‰í† ë¦¬ ìƒì„±         |
| `rmdir`    | ì›ê²© ë””ë ‰í† ë¦¬ ì‚­ì œ         |

---

### âš™ï¸ ì˜µì…˜ ì •ë¦¬

| ì˜µì…˜ ì´ë¦„      | ì„¤ëª…                                | í•„ìˆ˜ ì—¬ë¶€     | ì˜ˆì‹œ                          |
|----------------|-------------------------------------|----------------|-------------------------------|
| `host`         | SFTP ì„œë²„ IP ë˜ëŠ” ë„ë©”ì¸            | âœ…             | `"192.168.1.10"`              |
| `port`         | SFTP í¬íŠ¸ (ê¸°ë³¸ê°’: 22)              | âŒ             | `22`                          |
| `user`         | ë¡œê·¸ì¸ ê³„ì •                         | âœ…             | `"myid"`                      |
| `password`     | ë¡œê·¸ì¸ ë¹„ë°€ë²ˆí˜¸                     | ğŸ” (ë˜ëŠ” `key_file`) | `"mypassword"`         |
| `key_file`     | SSH ê°œì¸í‚¤ íŒŒì¼ ê²½ë¡œ                | ğŸ” (ë˜ëŠ” `password`) | `"~/.ssh/id_rsa"`      |
| `remote_dir`   | ì„œë²„ ìƒì˜ ë””ë ‰í† ë¦¬ ê²½ë¡œ             | âŒ             | `"/upload"`                   |
| `file`         | ì „ì†¡í•  ë¡œì»¬ íŒŒì¼ ë˜ëŠ” ì €ì¥ ê²½ë¡œ     | `upload/download`ì—ì„œ âœ… | `"c:/tmp/test.csv"`  |
| `timeout`      | ì—°ê²° íƒ€ì„ì•„ì›ƒ(ì´ˆ ë‹¨ìœ„)              | âŒ             | `15`                          |
| `overwrite`    | ë‹¤ìš´ë¡œë“œ ì‹œ íŒŒì¼ ë®ì–´ì“°ê¸° ì—¬ë¶€      | âŒ             | `True`, `False`               |
| `with`         | ì„¤ì • ì •ë³´ë¥¼ ë‹´ì€ map ê°ì²´ ì°¸ì¡°      | âŒ             | `WITH=sftp_info`              |

### ğŸ“Œ ëª…ë ¹ì–´: `HTTP`

| í•­ëª©         | ì„¤ëª…                                                   |
|--------------|--------------------------------------------------------|
| **ëª…ë ¹ì–´**   | `HTTP`                                                 |
| **ì„¤ëª…**     | HTTP ë˜ëŠ” HTTPS ìš”ì²­ì„ ìˆ˜í–‰í•˜ë©°, í”„ë¡œí† ì½œì€ `url`ì„ í†µí•´ ìë™ íŒë‹¨ |
| **í˜•ì‹ ì˜ˆì‹œ**| `HTTP method="GET" url="https://..." ...` ë˜ëŠ” `HTTP WITH=req_data` |

---

### ğŸ§± Subcommand â†’ ì—†ìŒ (ëŒ€ì‹  `method`ë¥¼ ì˜µì…˜ìœ¼ë¡œ ì‚¬ìš©)

| ì˜µì…˜ ì´ë¦„ | ì„¤ëª…               |
|-----------|--------------------|
| `method`  | ìš”ì²­ ë°©ì‹ (GET ë“±) |

---

### âš™ï¸ ì˜µì…˜ ì •ë¦¬

| ì˜µì…˜ ì´ë¦„      | ì„¤ëª…                                  | í•„ìˆ˜ ì—¬ë¶€ | ì˜ˆì‹œ                                     |
|----------------|---------------------------------------|------------|------------------------------------------|
| `method`       | HTTP ë©”ì„œë“œ (GET, POST, PUT, DELETE ë“±) | âœ…        | `"GET"`, `"POST"`                        |
| `url`          | ìš”ì²­ ëŒ€ìƒ URL (`http://` ë˜ëŠ” `https://`) | âœ…        | `"https://api.example.com/user"`         |
| `headers`      | ìš”ì²­ í—¤ë” (key-value map)              | âŒ        | `{"Authorization": "Bearer xyz"}`       |
| `params`       | ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° (key-value map)          | âŒ        | `{"q": "search", "page": 1}`            |
| `body`         | POST/PUT ì‹œ ì „ì†¡í•  ë³¸ë¬¸ ë°ì´í„°         | âŒ        | `{"name": "í™ê¸¸ë™", "age": 30}`         |
| `content_type` | Content-Type ì§€ì •                      | âŒ        | `"application/json"`                    |
| `timeout`      | ìš”ì²­ íƒ€ì„ì•„ì›ƒ (ì´ˆ ë‹¨ìœ„)                | âŒ        | `10`                                     |
| `verify_ssl`   | SSL ì¸ì¦ì„œ ê²€ì¦ ì—¬ë¶€ (`https`ë§Œ í•´ë‹¹) | âŒ        | `True`, `False`                         |
| `with`         | ì„¤ì • ì •ë³´ë¥¼ ë‹´ì€ map ê°ì²´ ì‚¬ìš©         | âŒ        | `WITH=req_config`                        |
| `save_as`      | ì‘ë‹µ ê²°ê³¼ë¥¼ ë³€ìˆ˜ì— ì €ì¥                | âŒ        | `save_as="response_text"`               |
| `parse_json`   | ì‘ë‹µì„ JSONìœ¼ë¡œ íŒŒì‹±í•˜ì—¬ ì €ì¥          | âŒ        | `True` (ìë™ìœ¼ë¡œ Dict í˜•íƒœ ì €ì¥ë¨)      |

---

### ğŸ“ ì˜ˆì‹œ

#### â–¶ ì§ì ‘ ì˜µì…˜ ì „ë‹¬

```kvs
HTTP method="POST" url="https://api.example.com/user" body={"name":"ì² ìˆ˜"} content_type="application/json" save_as="result"
```

#### â–¶ WITH ì‚¬ìš©

```kvs
SET req = {
    "method": "GET",
    "url": "http://localhost:8080/health",
    "timeout": 5,
    "save_as": "health_status"
}
HTTP WITH=req
```

#### â–¶ GET ìš”ì²­ì— í—¤ë” í¬í•¨

```kvs
HTTP method="GET" url="https://api.example.com/data" headers={"Authorization": "Bearer token123"} save_as="response_data"
```
